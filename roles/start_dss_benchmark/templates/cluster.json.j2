{
    "subnets": [
{%- set client_index = { 'value': 0 } -%}
{% for server in groups['servers'] -%}
    {% set server_loop = loop -%}
    {% for tcp_ip in hostvars[server].tcp_vlan_ip_list -%}
        {% if groups['clients'][client_index.value] is defined %}

        {
            "minioServers": ["{{ tcp_ip }}:{{minio_port}}"],
            "minioHosts": ["{{ hostvars[server].inventory_hostname }}"],
            "minioBucket": "{{ benchmark_bucket_prefix }}{{ client_index.value + 1 }}",
            "warpClients": ["{{ hostvars[groups['clients'][client_index.value]].ansible_default_ipv4.address }}"]
        }
            {%- if ((not loop.last) and
                (not server_loop.last)) or
                (groups['clients'][client_index.value + 1] is defined) -%}
            ,
            {%- endif -%}
        {% if client_index.update({ 'value': client_index.value + 1 }) %}{% endif -%}
        {% endif -%}
    {% endfor -%}
{% endfor %}

    ]
}
