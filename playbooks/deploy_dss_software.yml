---

- name: Deploy UFM ETCD
  hosts:
    - servers
    - ufm_hosts
  any_errors_fatal: true
  roles:
    - deploy_ufm_etcd

- name: Deploy UFM
  hosts: ufm_hosts
  any_errors_fatal: true
  roles:
    - start_ufm_etcd
    - deploy_ufm

- name: Deploy DSS Target and Host
  hosts: servers
  roles:
    - deploy_dss_target
    - deploy_etcd_gateway
    - deploy_dss_agent
    - deploy_dss_host
    - get_tcp_vlan_ip_list

- name: Deploy DSS Minio
  hosts:
    - servers
    - clients
  roles:
    - deploy_dss_minio

- name: Deploy DSS benchmark
  hosts: clients
  roles:
    - deploy_dss_benchmark
    - configure_mc_alias

- name: Start DSS Software
  import_playbook: start_dss_software.yml
